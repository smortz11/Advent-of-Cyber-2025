Welcome to Advent of Cyber day 7, the marking of our first complete week in TryHackMe's event! Today, judging from the name of the room, we are going to be covering some network scans, which is most often in the form of nmap. Nmap is an extensively developed and supported tool that allows us to scan target hosts/IP ranges, which allows us to enumerate devices, ports, and much more. We can run various scans that can grab banner headers and inform us of the services offered per host. This is usually the first step in a red team operation, reconnaissance. More specifically, the objects of the room include service discovery with nmap and networking fundamentals. Let's start both the attackbox and the VM and get started!

Starting the room, we are told the IP address of the target system, which is the IP of the VM we have started.  We can perform a basic port scan using the following command:

```
nmap <ip-address>
```

Doing so informs us that the target has ports 22 (ssh) and 80 (http) open. On our machine, we can navigate to `http://<ip-address>:80` to access the web server, giving us the solution to Q1.

Next up, we can run `nmap <ip-address> -p- --script=banner` to scan ALL ports, not just the first 1000, along with a script to give us more information. Doing so informs us of an FTP server running on port 21212. We can attempt to connect to the server with `ftp <ip-address> 21212`. On the login request, we submit the username `anonymous`. Now, inside the FTP server, we can run `ls` to find files. One of them is of interest, and we can output its contents using `get <file-name> -`. This is the solution to Q2.

In the next part of the room, we are told about a custom TBFC app that runs on the uncommon port, `25251`. This was not shown on the nmap scan because by default, nmap scans the top thousand most common ports. We can connect to this port in a terminal by using the command `nc -v <ip-address> 25251`. We are given a short interface where we can type commands, where one gives us the second key part, Q3.

Thus far, we have only enumerated TCP ports. We can append the flag `-sU` to our original nmap command in order to enumerate UDP services. as well. Doing show reveals the DNS open on the host. In a blind shot in the dark, we can query the DNS server in hopes that it contains the flag. I did so using the following command:

```
dig @10.48.172.142 TXT key3.tbfc.local +short
```

This  is the answer to Q3. Now, with all flag parts, we can log back into the web server and enter our complete key. Doing so will unlock the terminal in the site. We can quickly see what all is running by using the command `ss -tunlp`. Doing so will show us a service running on port 3306, which is MySQL.  We can then use SQL commands to manipulate and show the contents in the database, such as `mysql -D tbfcqa01 -e "show tables;"`. Doing so will give us the answer to Q6. Doing so completes the room, as well as our daily cyber activities!

### Q1: What evil message do you see on top of the website?
nmap scan -> browse to `http://<ip-address>:80`.

### Q2: What is the first key part found on the FTP server?
nmap scan with more ports -> use ftp commands to connect to ftp server -> grab the file of interest.

### Q3: What is the second key part found in the TBFC app?
Connect to port 25251 with netcat and enter a few help commands to obtain the key!

### Q4: What is the third key part found in the DNS records?
UDP nmap scan -> dig command on the DNS port.

### Q5: Which port was the MySQL database running on?
Enter key on the web server -> run ss command to view network connections -> look for MySQL ports

### Q6: Finally, what's the flag you found in the database?
Use SQL commands in the server terminal to manipulate the tables and look for the flag.